<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>
global.new_reg = 0;

length = 10; //Максимальная длина имени
globalvar name; name = '';//Переменная, в которую будет записано имя игрока
keyboard_string = '';//переменная для таблицы рекордов

cur = '|';//это у нас будет "мигающий курсор", можно заменить на любой символ, например на "_"
alarm[3] = 15; //включаем аларм, это для того чтобы курсор мигал каждые 15 шагов (0,5 секунды)

global.exelend = false;//Переменная завершения записи


</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//Ну тут, наверное, и так понятно: курсор то появляется, то исчезает
if (cur = ' ')
    cur = '|';
else
    cur = ' ';

alarm[3] = 15;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if newgame == 1{
    if (string_length(keyboard_string)&gt;length)//если набираемый текст превышает заданную длину,
        { 
            keyboard_string = string_copy(keyboard_string, 1, length);//мы его обрезаем
        }
    if (name != keyboard_string)
    {
        audio_play_sound(appearance_letters, 0, false);
    }
    name = keyboard_string;//а потом записываем в переменную для отправки в таблицу рекордов
}else{keyboard_string='';}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>524</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>1</exetype>
        <functionname>action_color</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>13</kind>
            <string>1120272</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>605</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>отрисовка введённого текста</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>    if newgame == 1
        {
            draw_set_font(user_fond)
            //draw_text(obj_menu_screen.x+5,obj_menu_screen.y,global.WIDTH)
            //draw_text(obj_menu_screen.x+5,obj_menu_screen.y+30,global.HEIGHT)
            
            draw_text(478,445, string(name)+ string(cur)); //Выводим на экран то что ввели с клавиатуры и в конце "мигающий курсор"
        
            if (name != '')
            {
                draw_set_font(main_fond);
                if (global.language == "En"){
                    draw_text(830,290, 'Press Enter')}
                if (global.language == "Ru"){
                    draw_text(815,290, 'Нажмите Ввод')}
            }
        }
    if credits == 1
        {
            draw_set_font(main_fond);
            if (global.language == "En"){
                draw_text(820,350, 'Press Enter')}
            if (global.language == "Ru"){
                draw_text(805,350, 'Нажмите Ввод')}
            
        }
    if recordlist == 1
        {
            draw_set_font(main_fond);
            if (file_exists('rekord_list.txt') == true)//Если файл существует
            {
                rekord_list = file_text_open_read('rekord_list.txt')//Открывает для чтения
                name_txt = file_text_read_string(rekord_list)//Считывает и возвращает
                file_text_readln(rekord_list)// Переходит на новую строку
                score_txt = file_text_read_string(rekord_list)//Считывает и возвращает
                file_text_readln(rekord_list)// Переходит на новую строку
                missed_txt = file_text_read_string(rekord_list)//Считывает и возвращает
                file_text_readln(rekord_list)// Переходит на новую строку
                time_txt = file_text_read_string(rekord_list)//Считывает и возвращает 
                file_text_readln(rekord_list)// Переходит на новую строку
                time2_txt = file_text_read_string(rekord_list)//Считывает и возвращает
                if (global.language == "Ru"){
                //Возвращает строку str с первой встретившейся подстрокой substr, замененной на подстроку newstr. 
                substr = "h"
                newstr = "ч"
                    time2_txt = string_replace(time2_txt,substr,newstr)}
                file_text_close(rekord_list)//Сохраняет и закрывает документ
                
                draw_set_font(main_fond)// Выбор шрифта
                if (global.language == "En"){
                    draw_text(500,340,"User name: "+name_txt)//Отрисовка в позиции 
                    draw_text(500,365,"User score: "+score_txt)//Отрисовка в позиции 
                    draw_text(500,390,"User exact: "+string(100-(real(missed_txt)/(real(score_txt)/100))) + "%");
                    draw_text(500,415,"Record time: "+time_txt)//Отрисовка в позиции 
                    draw_text(500,440,"Game time: "+time2_txt)//Отрисовка в позиции 
                }if (global.language == "Ru"){
                    draw_text(500,340,"Имя: "+name_txt)//Отрисовка в позиции 
                    draw_text(500,365,"Очки: "+score_txt)//Отрисовка в позиции 
                    draw_text(500,390,"Точность: "+string(100-(real(missed_txt)/(real(score_txt)/100))) + "%");
                    draw_text(500,415,"Время рекорда: "+time_txt)//Отрисовка в позиции 
                    draw_text(500,440,"Время в игре: "+time2_txt)//Отрисовка в позиции 
                }
            }
        else
            {
                if (global.language == "En"){
                    draw_set_font(user_fond)
                    draw_text(700,450, 'Not Reckords')}
                if (global.language == "Ru"){
                    draw_set_font(user_fond)
                    draw_text(700,450, 'Нет Рекорда')}
            }
            if (global.language == "En"){
                draw_set_font(main_fond)
                draw_text(800,300, 'Press Enter')}
            if (global.language == "Ru"){
                draw_set_font(main_fond)
                draw_text(790,300, 'Нажмите Ввод')}
        }
        
    if exid == 1
        {
            draw_set_font(main_fond);
            if (global.language == "En"){
                draw_text(480,480, 'Press Enter to Exid')}
            if (global.language == "Ru"){
                draw_text(480,480, 'Нажмите Ввод для Выхода')}
        }
    if loadgame == 1
        {
            if (global.language == "En"){
                draw_set_font(main_fond);
                draw_text(470,475, 'Press Enter to Load Game')}
            if (global.language == "Ru"){
                draw_set_font(main_fond);
                draw_text(470,475, 'Нажмите Ввод для Загрузки Игры')}
                
            if (file_exists('user_name.txt') == true)//Если файл существует
            {
                user_name = file_text_open_read('user_name.txt')//Открывает для чтения
                name_user = file_text_read_string(user_name)//Считывает и возвращает
                file_text_readln(user_name)// Переходит на новую строку
                /*data_tyme = file_text_read_real(user_name)//Считывает и возвращает
                year = date_year_span(data_tyme,date_current_datetime())
                month = date_month_span(data_tyme,date_current_datetime())
                day = date_day_span(data_tyme,date_current_datetime())
                hour = date_hour_span(data_tyme,date_current_datetime())
                minute = date_minute_span(data_tyme,date_current_datetime())
                second = date_second_span(data_tyme,date_current_datetime())*/
                data = file_text_read_string(user_name)
                file_text_readln(user_name)// Переходит на новую строку
                time = file_text_read_string(user_name)//Считывает и возвращает       
                file_text_close(user_name)//Сохраняет и закрывает документ
                /*rezult = string(floor(year mod 365))+"/"+string(floor(month mod 12))+"/"+string(floor(day mod 31))+"/ "+
                    string(floor(hour mod 24))+":"+string(floor(minute mod 60))+":"+string(floor(second mod 60))*/
                draw_set_font(main_fond)// Выбор шрифта
                draw_text(480,445,name_user)//Отрисовка в позиции 
                draw_text(680,450,time)//Отрисовка в позиции
                draw_text(680,435,data)//Отрисовка в позиции
                
            }
        }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="9" enumb="13">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if newgame == 1
{
    if name != ''
    {
        globalvar newgame; newgame = 0;
        globalvar loadgame; loadgame = 0;
        globalvar credits; credits = 0;
        globalvar recordlist; recordlist = 0;
        globalvar exid; exid = 0;
        audio_stop_sound(Start_Musik)
        global.new_reg = 0;
        room_goto(PlayRoom);
        game_save("savegame");
        
        User_name = file_text_open_write('user_name.txt')//Открывает для записи файл с заданным именем fname. Если файла не существует, то создаётся новый.
        file_text_write_string(User_name,name)// Записывает имя игрока.
        file_text_writeln(User_name)// Начинает записывать данные с новой строчки).
        year = string(current_year)//Создаём переменные времени и года
        mouth = string(current_month)//Создаём переменные времени и года
        day = string(current_day)//Создаём переменные времени и года
        hour = string(current_hour)//Создаём переменные времени и года
        minute = string(current_minute)//Создаём переменные времени и года
        second = string(current_second)//Создаём переменные времени и года
        file_text_write_string(User_name,string(day+'.'+mouth+'.'+year+' '+hour+':'+minute+':'+second))//Запишем ещё и дату это число дней, прошедших с 12/30/1899
        file_text_writeln(User_name)// Начинает записывать данные с новой строчки).
        file_text_write_string(User_name,string('0h 0:0'))// Записывает время в игре.
        file_text_close(User_name)//Сохраняет и закрывает документ
        audio_play_sound(sound_pause, 0, false);
    }
}
if credits == 1
{
    globalvar newgame; newgame = 0;
    globalvar loadgame; loadgame = 0;
    globalvar credits; credits = 0;
    globalvar recordlist; recordlist = 0;
    globalvar exid; exid = 0; 
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
